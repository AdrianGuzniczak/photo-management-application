{% extends 'main.html' %}
{% block content %}

<!-- Page content-->
<div class="container">
    <div class="row">
        <!-- Blog entries-->
        <div class="col-lg-8">
            <!-- Nested row for non-featured blog posts-->        
            <div class="row">
                {% for photo in photo_list %} 
                <div class="col-lg-6">
                    <!-- Blog post-->

                    <div class="card mb-4">
                        {% comment %} {% if post.image %} {% endcomment %}
                        {% comment %} <a href="#!"><img class="card-img-top" src="{{photo.title}}" alt="..." /></a> {% endcomment %}
                        <a href="#!"><img class="card-img-top" src="https://dummyimage.com/700x350/dee2e6/6c757d.jpg" alt="..." /></a>
                        {% comment %} {% endif %} {% endcomment %}
                        <div class="card-body">
                            <h2 class="card-title h4">{{photo.title}}</h2>
                            <p class="card-text">{{photo.title}}</p>
                                                            {% comment %} '{% url 'managing_photos:upload' %}' {% endcomment %}
                            <a class="btn btn-primary" href="{% url 'managing_photos:delete_photo' photo.id %}">Delete</a>
                            <a class="btn btn-primary" href="{% url 'managing_photos:photo_update' photo.id %}">Update</a>
                        </div>
                    </div>
                    
                </div>
                {% endfor %}
            </div>
            <!-- Pagination-->
            {% if is_paginated %}
            <nav aria-label="Pagination">
                <ul class="pagination justify-content-center">
                    {% if is_paginated %}
              
                      {% if page_obj.has_previous %}
                        <a class="btn btn-outline-primary" href="?page=1">First</a>
                        <a class="btn btn-outline-primary " href="?page={{ page_obj.previous_page_number }}">Previous</a>
                      {% endif %}
              
                      {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                          <a class="btn btn-outline-secondary" href="?page={{ num }}">{{ num }}</a>
                        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                          <a class="btn btn-outline-secondary " href="?page={{ num }}">{{ num }}</a>
                        {% endif %}
                      {% endfor %}
              
                      {% if page_obj.has_next %}
                        <a class="btn btn-outline-primary" href="?page={{ page_obj.next_page_number }}">Next</a>
                        <a class="btn btn-outline-primary" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
                      {% endif %}
              
                    {% endif %}
                  </ul>
              
            </nav>
            {% endif %}
        </div>
        <!-- Side widgets-->
        <div class="col-lg-4">
            <!-- Search widget-->
            <div class="card mb-4">
                <div class="card-header">Import photos from external API</div>
                <div class="card-body">
                    <div class="input-group">
                        <input class="form-control" type="text" value="https://jsonplaceholder.typicode.com/photos" aria-label="Enter search term..." aria-describedby="button-search" />
                        <button class="btn btn-primary" id="button-search" type="button">Go!</button>
                    </div>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">Import photos from .json file</div>
                <div class="card-body">
                    <form method="post" action = '{% url 'managing_photos:upload' %}' enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="input-group">
                            <input type="file" name="document" type="file" class="form-control" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
                            <input type="submit" class="btn btn-primary" value="Upload!">
                        </div>
                    </form>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">Add photo</div>
                <div class="card-body">
                    <form method="POST" action = '{% url 'managing_photos:create_photo' %}'>
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="formGroupExampleInput">Title</label></br>
                            {{ form.title }}
                        </div>
                        <div class="form-group">
                            <label for="formGroupExampleInput2">album ID</label></br>
                            {{ form.albumId}}
                        </div>
                        <div class="form-group">
                            <label for="formGroupExampleInput2">URL</label></br>
                            {{ form.url}}
                        </div>
                        <input type="submit" class="btn btn-primary" value="Add!">
                    </form>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">Delete all photos</div>
                <div class="card-body">
                    <a href = '{% url 'managing_photos:delete_all' %}'><button type="button" class="btn btn-danger">Delete All Photos</button></a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}